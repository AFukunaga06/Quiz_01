<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å°å­¦ç”Ÿå‘ã‘ä¸‰æŠã‚¯ã‚¤ã‚º 80å•</title>
  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --text:#111827; --muted:#6b7280; --brand:#1e3a8a; --ok:#1e3a8a; --ng:#1e3a8a; --shadow:0 8px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP",sans-serif;}
    .wrap{max-width:960px;margin:32px auto;padding:0 16px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:16px}
    .title{font-weight:800;font-size:clamp(16px,3.5vw,24px)}
    .controls{display:flex;gap:8px;align-items:center}
    button, .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;background:var(--brand);color:#fff;font-weight:700;cursor:pointer;box-shadow:var(--shadow)}
    button:disabled{opacity:.6;cursor:not-allowed}
    .btn-outline{background:#fff;color:var(--brand);border:2px solid var(--brand)}
    .btn-ghost{background:transparent;color:var(--muted);box-shadow:none}
    .card{background:var(--card);border-radius:18px;box-shadow:var(--shadow);padding:20px}
    .meta{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;color:var(--muted);font-weight:700;margin:6px 0 14px}
    .progress{width:100%;height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:var(--brand);transition:width .3s ease}
    .question{font-size:clamp(18px,3.2vw,28px);font-weight:800;line-height:1.35;margin:12px 0 8px}
    .choices{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
    .choice{border:2px solid #e5e7eb;background:#fff;border-radius:14px;padding:14px;font-size:18px;font-weight:700;text-align:left;cursor:pointer;transition:.2s;display:flex;gap:10px;align-items:center;color:#1e3a8a}
    .choice:hover{transform:translateY(-1px)}
    .choice.correct{border-color:var(--ok);background:#e0e7ff;color:#1e3a8a}
    .choice.wrong{border-color:var(--ng);background:#f1f5f9;color:#1e3a8a}
    .choice .label{display:inline-block;min-width:2.2em;text-align:center;padding:.2em .6em;border-radius:999px;background:#eef2ff;color:var(--brand);font-weight:900}
    .feedback{min-height:28px;margin-top:6px;font-weight:800;color:#1e3a8a}
    .nav{display:flex;gap:10px;justify-content:space-between;margin-top:14px}
    .score{font-weight:900}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:8px}
    .pill{border:1px solid #e5e7eb;border-radius:999px;padding:6px 0;text-align:center;font-weight:700;background:#fff;color:#1e3a8a}
    footer{margin:26px 0;color:var(--muted);text-align:center}
    @media (min-width:720px){.choices{grid-template-columns:1fr 1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">ğŸ§  å°å­¦ç”Ÿå‘ã‘ã‚„ã•ã—ã„ä¸‰æŠã‚¯ã‚¤ã‚º <span id="total"></span></div>
      <div class="controls">
        <label style="display:flex;align-items:center;gap:6px;color:var(--muted);font-weight:700"><input type="checkbox" id="shuffle"> ãƒ©ãƒ³ãƒ€ãƒ </label>
        <button id="restart" class="btn-outline">æœ€åˆã‹ã‚‰</button>
      </div>
    </header>

    <div class="card">
      <div class="meta">
        <div>å•é¡Œ <span id="idx">1</span>/<span id="count">80</span></div>
        <div class="score">æ­£è§£ï¼š<span id="sc">0</span></div>
      </div>
      <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>

      <div id="qtext" class="question">èª­ã¿è¾¼ã¿ä¸­â€¦</div>
      <div id="choices" class="choices"></div>
      <div id="fb" class="feedback" aria-live="polite"></div>

      <div class="nav">
        <button id="prev" class="btn-ghost">â† ã¾ãˆ</button>
        <div style="display:flex;gap:8px">
          <button id="showAnswer" class="btn-ghost">ç­”ãˆã‚’è¦‹ã‚‹</button>
          <button id="next">ã¤ã â†’</button>
        </div>
      </div>
    </div>

    <div class="card" style="margin-top:14px">
      <details>
        <summary style="cursor:pointer;font-weight:800">ä¸€è¦§ï¼ˆã©ã‚Œã‚’è§£ã„ãŸã‹ï¼‰</summary>
        <div id="grid" class="grid" style="margin-top:12px"></div>
      </details>
    </div>

    <footer>
      Â© ã‚„ã•ã—ã„ä¸‰æŠã‚¯ã‚¤ã‚º / ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰: A/B/C ã§å›ç­”ã€â†/â†’ ã§ç§»å‹•
    </footer>
  </div>

<script>
const QUESTIONS = [
  // 1ã€œ50ï¼ˆæœ€åˆã®ãƒªã‚¹ãƒˆï¼‰
  {q:"ãƒ‘ãƒ³ãƒ€ã®ä¸»ãªé£Ÿã¹ã‚‚ã®ã¯ï¼Ÿ", c:["ã«ã‚“ã˜ã‚“","ãŸã‘","ãƒãƒŠãƒŠ"], a:1},
  {q:"ã‚«ã‚¨ãƒ«ã¯ã©ã“ã§ãã‚‰ã™å‹•ç‰©ï¼Ÿ", c:["ã†ã¿","ã‹ã‚ã‚„ç”°ã‚“ã¼","ã‚‚ã‚Šã®æœ¨ã®ä¸Š"], a:1},
  {q:"ã«ã»ã‚“ã§ä¸€ã°ã‚“ã‚ã¤ã„ãã›ã¤ã¯ï¼Ÿ", c:["ãªã¤","ã¯ã‚‹","ãµã‚†"], a:0},
  {q:"ã‚Šã‚“ã”ã®è‰²ã¯ã©ã‚ŒãŒå¤šã„ï¼Ÿ", c:["ã¿ã©ã‚Š","ã‚ã‹","ãã„ã‚"], a:1},
  {q:"ã›ã‚“ãŸãã‚‚ã®ã‚’ã‹ã‚ã‹ã™ã®ã¯ï¼Ÿ", c:["ã‹ãœ","ãŠã‚†","ã¤ã¡"], a:0},
  {q:"ã«ã‚“ã˜ã‚“ã®è‰²ã¯ï¼Ÿ", c:["ã‚ãŠ","ã‚ã‹","ã‚ªãƒ¬ãƒ³ã‚¸"], a:2},
  {q:"ã­ã“ãŒã€ã‚´ãƒ­ã‚´ãƒ­ã€ã™ã‚‹ã®ã¯ï¼Ÿ", c:["ã“ã‚ã„ã¨ã","ã†ã‚Œã—ã„ã¨ã","ãŠãªã‹ãŒã™ã„ãŸã¨ã"], a:1},
  {q:"ã™ã„ãˆã„ã‚’ã™ã‚‹ã¨ãã«ã¤ã‘ã‚‹ã®ã¯ï¼Ÿ", c:["ã‚¹ãƒªãƒƒãƒ‘","ã¼ã†ã—ã¨ã‚´ãƒ¼ã‚°ãƒ«","ãƒã‚¹ã‚¯"], a:1},
  {q:"ãŸã¬ãã®ã¨ãªã‚Šã«ã„ã‚‹ã®ã¯ï¼Ÿï¼ˆã“ã¨ã‚ã–ã€ãŸã¬ãã¨â—‹â—‹ã€ï¼‰", c:["ãã¤ã­","ã­ã“","ã†ã•ã"], a:0},
  {q:"ã‹ãŸã¤ã‚€ã‚ŠãŒã›ãŠã£ã¦ã„ã‚‹ã‚‚ã®ã¯ï¼Ÿ", c:["ãŸã¾ã”","ã‹ã•","ã‹ã‚‰"], a:2},
  {q:"ã‚¯ãƒªã‚¹ãƒã‚¹ã«ãã‚‹ã®ã¯ï¼Ÿ", c:["ã‚µãƒ³ã‚¿ã•ã‚“","ãƒˆãƒŠã‚«ã‚¤","ã›ã‚“ã›ã„"], a:0},
  {q:"ãŸãªã°ãŸã§æ›¸ãã‚‚ã®ã¯ï¼Ÿ", c:["ãŠã‹ã­","ã­ãŒã„ã”ã¨","ã¦ãŒã¿"], a:1},
  {q:"ã‹ã¿ã‚’åˆ‡ã‚‹ã¨ã“ã‚ã¯ï¼Ÿ", c:["ãƒ‘ãƒ³ã‚„ã•ã‚“","ã³ã‚ˆã†ã„ã‚“","ã»ã‚“ã‚„ã•ã‚“"], a:1},
  {q:"ã™ã‚‚ã†ã¨ã‚ŠãŒç€ã¦ã„ã‚‹æœã¯ï¼Ÿ", c:["ãµã‚“ã©ã—","ã‚†ã‹ãŸ","ã›ã„ãµã"], a:0},
  {q:"ã­ã‚‹ã¨ãã«ã‹ã‘ã‚‹ã®ã¯ï¼Ÿ", c:["ã‚«ãƒ¼ãƒ†ãƒ³","ãµã¨ã‚“","ã‚¿ã‚ªãƒ«"], a:1},
  {q:"ã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹ã¨ãã«ä½¿ã†ã®ã¯ï¼Ÿ", c:["ã¯ã•ã¿","ã¯ã—","ãƒšãƒ³"], a:1},
  {q:"ãƒ”ã‚«ãƒãƒ¥ã‚¦ã¯ãªã«ã‚¿ã‚¤ãƒ—ï¼Ÿ", c:["ã¿ãš","ã§ã‚“ã","ã»ã®ãŠ"], a:1},
  {q:"ãã†ã®ã¯ãªãŒé•·ã„ã®ã¯ãªãœï¼Ÿ", c:["ã‹ã£ã“ã„ã„ã‹ã‚‰","ãˆã•ã‚’ã¨ã‚‹ãŸã‚","ã¤ã®ã‚’ã‹ãã™ãŸã‚"], a:1},
  {q:"ã€ã‚ã‚ŠãŒã¨ã†ã€ã®åå¯¾ã®è¨€è‘‰ã¯ï¼Ÿ", c:["ã”ã‚ã‚“ãªã•ã„","ã•ã‚ˆã†ãªã‚‰","ã©ã†ã„ãŸã—ã¾ã—ã¦"], a:0},
  {q:"ã«ã»ã‚“ã®é¦–éƒ½ã¯ï¼Ÿ", c:["ãŠãŠã•ã‹","ã¨ã†ãã‚‡ã†","ãã‚‡ã†ã¨"], a:1},
  {q:"ã‚«ãƒ¬ãƒ¼ã«å…¥ã£ã¦ã„ãªã„ã®ã¯ï¼Ÿ", c:["ã˜ã‚ƒãŒã„ã‚‚","ã«ã‚“ã˜ã‚“","ã‚¤ãƒã‚´"], a:2},
  {q:"ã‚ã‚ãŒãµã‚‹ã¨å‡ºã‚‹ã“ã¨ãŒã‚ã‚‹ã‚‚ã®ã¯ï¼Ÿ", c:["ã«ã˜","ã»ã—","ã¤ã"], a:0},
  {q:"ãŸã¾ã”ã‚’ã†ã‚€å‹•ç‰©ã¯ï¼Ÿ", c:["ã„ã¬","ã«ã‚ã¨ã‚Š","ã†ã¾"], a:1},
  {q:"ã„ã¡ã°ã‚“é•·ã„å·ã¯ï¼Ÿï¼ˆæ—¥æœ¬ï¼‰", c:["ä¿¡æ¿ƒå·","åˆ©æ ¹å·","æœ¨æ›½å·"], a:0},
  {q:"1æ—¥ã¯ä½•æ™‚é–“ï¼Ÿ", c:["10æ™‚é–“","24æ™‚é–“","30æ™‚é–“"], a:1},
  {q:"ã€æœˆã€ãŒå‡ºã‚‹ã®ã¯ã„ã¤ï¼Ÿ", c:["ã‚ˆã‚‹","ã²ã‚‹","ã‚ã•"], a:0},
  {q:"ã•ã‹ãªãŒã™ã‚“ã§ã„ã‚‹ã¨ã“ã‚ã¯ï¼Ÿ", c:["ã‚‚ã‚Š","ã†ã¿ã‚„ã‹ã‚","ãã‚‰"], a:1},
  {q:"ã†ã•ãã®è€³ã¯ï¼Ÿ", c:["ã¿ã˜ã‹ã„","ãªãŒã„","ã¾ã‚‹ã„"], a:1},
  {q:"ã€ã‚ã‚“ã‚ã‚“ã€ã¨ãªãå‹•ç‰©ã¯ï¼Ÿ", c:["ã­ã“","ã„ã¬","ã†ã—"], a:1},
  {q:"ãˆã‚“ã´ã¤ã§æ›¸ã„ãŸæ–‡å­—ã‚’ã‘ã™ã‚‚ã®ã¯ï¼Ÿ", c:["ã¯ã•ã¿","ã‘ã—ã‚´ãƒ ","ãˆã‚“ã´ã¤ã‘ãšã‚Š"], a:1},
  {q:"ãªã¤ã«é£Ÿã¹ãŸããªã‚‹å†·ãŸã„ã‚‚ã®ã¯ï¼Ÿ", c:["ã‚¢ã‚¤ã‚¹","ãŠã§ã‚“","ã‚¹ãƒ¼ãƒ—"], a:0},
  {q:"ã‚µãƒƒã‚«ãƒ¼ã§ä½¿ã†ãƒœãƒ¼ãƒ«ã¯ï¼Ÿ", c:["å››è§’ã„","ä¸¸ã„","ä¸‰è§’"], a:1},
  {q:"ã€ãŠã¯ã‚ˆã†ã€ã¨è¨€ã†ã®ã¯ã„ã¤ï¼Ÿ", c:["ã‚ˆã‚‹","ã²ã‚‹","ã‚ã•"], a:2},
  {q:"äººãŒã™ã‚€ã¨ã“ã‚ã¯ï¼Ÿ", c:["ã„ãˆ","ãã‚‹ã¾","æœ¨ã®ä¸Š"], a:0},
  {q:"ã‚Šã™ãŒã™ããªé£Ÿã¹ç‰©ã¯ï¼Ÿ", c:["ã©ã‚“ãã‚Š","ã«ã‚“ã˜ã‚“","ãƒãƒŠãƒŠ"], a:0},
  {q:"ã‚¯ãƒªã‚¹ãƒã‚¹ã®æœ¨ã¯ï¼Ÿ", c:["ãƒ¢ãƒŸã®æœ¨","ã‚µã‚¯ãƒ©ã®æœ¨","ã‚«ã‚¨ãƒ‡ã®æœ¨"], a:0},
  {q:"ã€ã“ã„ã®ã¼ã‚Šã€ã‚’ã‚ã’ã‚‹æ—¥ã¯ï¼Ÿ", c:["ã²ãªã¾ã¤ã‚Š","ã“ã©ã‚‚ã®æ—¥","ãŠã—ã‚‡ã†ãŒã¤"], a:1},
  {q:"ãŠã«ãã‚Šã®ä¸­ã«å…¥ã£ã¦ã„ãªã„ã‚‚ã®ã¯ï¼Ÿ", c:["ã—ã‚ƒã‘","ã†ã‚ã¼ã—","ã‚±ãƒ¼ã‚­"], a:2},
  {q:"äººã®ã‹ã‚‰ã ã§ã€è¦‹ãˆã‚‹ã€ã¨ã“ã‚ã¯ï¼Ÿ", c:["ã¯ãª","ã—ã‚“ãã†","ã‘ã¤ãˆã"], a:0},
  {q:"ç©ºã‚’ã¨ã¶ã®ãŒä¸Šæ‰‹ãªå‹•ç‰©ã¯ï¼Ÿ", c:["ã†ã¾","ã¨ã‚Š","ã­ã“"], a:1},
  {q:"ã²ã‚‰ãŒãªã¯ãœã‚“ã¶ã§ä½•æ–‡å­—ï¼Ÿ", c:["46æ–‡å­—","50æ–‡å­—","40æ–‡å­—"], a:0},
  {q:"ã«ã»ã‚“ã®å›½æ——ã®è‰²ã¯ï¼Ÿ", c:["ã‚ãŠã¨ã—ã‚","ã‚ã‹ã¨ã—ã‚","ã‚ã‹ã¨ã‚ãŠ"], a:1},
  {q:"ã¤ãã«è¡Œã£ãŸäººãŒã®ã£ãŸã®ã¯ï¼Ÿ", c:["ã˜ã¦ã‚“ã—ã‚ƒ","ãƒ­ã‚±ãƒƒãƒˆ","ã²ã“ã†ã"], a:1},
  {q:"ãµã‚†ã«ã‚ˆããµã‚‹ã®ã¯ï¼Ÿ", c:["ã‚ã‚","ã‚†ã","ã‹ãœ"], a:1},
  {q:"ã©ã†ã¶ã¤ãˆã‚“ã«ã„ãã†ãªã®ã¯ï¼Ÿ", c:["ãƒ©ã‚¤ã‚ªãƒ³","ã‚¿ã‚³","ã‚¯ã‚¸ãƒ©"], a:0},
  {q:"1å¹´ã®ã•ã„ã—ã‚‡ã®æœˆã¯ï¼Ÿ", c:["1æœˆ","3æœˆ","12æœˆ"], a:0},
  {q:"ã”ã¯ã‚“ã‚’ãŸãã®ã¯ï¼Ÿ", c:["ã‚ªãƒ¼ãƒ–ãƒ³","ã™ã„ã¯ã‚“ã","ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³"], a:1},
  {q:"ã„ã¡ã”ã®ãŸã­ã¯ã©ã“ã«ã‚ã‚‹ï¼Ÿ", c:["ãªã‹","ãã¨","ã©ã“ã«ã‚‚ãªã„"], a:1},
  {q:"ãƒ”ã‚¢ãƒã‚’ã²ãã¨ãã«ä½¿ã†ã®ã¯ï¼Ÿ", c:["æ‰‹","è¶³","å£"], a:0},
  {q:"ã€ãŠã‚„ã™ã¿ãªã•ã„ã€ã¨è¨€ã†ã®ã¯ï¼Ÿ", c:["ã²ã‚‹","ã‚ˆã‚‹","ã‚ã•"], a:1},
  // 51ã€œ80ï¼ˆè¿½åŠ ã®30å•ï¼‰
  {q:"ãˆã‚“ã´ã¤ã‚’ã‘ãšã‚‹é“å…·ã¯ï¼Ÿ", c:["ã‘ã—ã‚´ãƒ ","ãƒŠã‚¤ãƒ•","ãˆã‚“ã´ã¤ã‘ãšã‚Š"], a:2},
  {q:"ã¯ãŒãã‚’é€ã‚‹ã¨ãã«å¿…è¦ãªã®ã¯ï¼Ÿ", c:["åˆ‡æ‰‹","ã‚¹ãƒ—ãƒ¼ãƒ³","ã¯ã—"], a:0},
  {q:"èŠ±ã«ã¨ã¾ã£ã¦ã¿ã¤ã‚’ã™ã†è™«ã¯ï¼Ÿ", c:["ã‚ã‚Š","ã¡ã‚‡ã†ã¡ã‚‡","ã›ã¿"], a:1},
  {q:"ã‚«ã‚¿ã‚«ãƒŠã§æ›¸ãã®ã¯ã©ã‚Œï¼Ÿ", c:["ã„ã¬","ã‚µãƒƒã‚«ãƒ¼","ã‚„ã¾"], a:1},
  {q:"ã„ã¡ã°ã‚“æ—©ãèµ°ã‚Œã‚‹å‹•ç‰©ã¯ï¼Ÿ", c:["ãƒãƒ¼ã‚¿ãƒ¼","ãã†","ã‚«ãƒ¡"], a:0},
  {q:"ãŠé‡‘ã‚’å…¥ã‚Œã¦ã‚¸ãƒ¥ãƒ¼ã‚¹ã‚’å‡ºã™æ©Ÿæ¢°ã¯ï¼Ÿ", c:["ã˜ã©ã†ã¯ã‚“ã°ã„ã","ã‚³ãƒ”ãƒ¼ã","ãƒ†ãƒ¬ãƒ“"], a:0},
  {q:"ã€ã²ãªã¾ã¤ã‚Šã€ã¯ä½•æœˆï¼Ÿ", c:["3æœˆ","5æœˆ","12æœˆ"], a:0},
  {q:"ã€ãŠæ­£æœˆã€ã«é£Ÿã¹ã‚‹æ–™ç†ã¯ï¼Ÿ", c:["ã‚«ãƒ¬ãƒ¼","ãŠã›ã¡","ãƒãƒ³ãƒãƒ¼ã‚°"], a:1},
  {q:"ã€å¤ä¼‘ã¿ã€ã¯ã©ã®å­£ç¯€ï¼Ÿ", c:["ãµã‚†","ãªã¤","ã‚ã"], a:1},
  {q:"ã†ã¾ãŒèµ°ã‚‹ã¨ã“ã‚ã¯ï¼Ÿ", c:["ç‰§å ´","æµ·ã®åº•","å±±ã®ä¸Š"], a:0},
  {q:"ãƒã‚¹ã«ã®ã‚‹ã¨ãã¯ä½•ã‚’æ‰•ã†ï¼Ÿ", c:["ãŠé‡‘","ã¯ãŒã","ãƒã‚¤ãƒ³ãƒˆ"], a:0},
  {q:"ç©ºã‹ã‚‰ãµã‚‹ç™½ã„ã‚‚ã®ã¯ï¼Ÿ", c:["ã»ã—","ã‚†ã","ã¤ã¡"], a:1},
  {q:"æœ¨ã®ä¸Šã§ä¼‘ã‚€å°å‹•ç‰©ã¯ï¼Ÿ", c:["ã‚«ã‚¨ãƒ«","ãƒªã‚¹","ãƒšãƒ³ã‚®ãƒ³"], a:1},
  {q:"ã€ãŠã™ã—ã€ã«ä½¿ã†ã”ã¯ã‚“ã¯ï¼Ÿ", c:["ã‚«ãƒ¬ãƒ¼ãƒ©ã‚¤ã‚¹","ã™ã—ã‚ã—","ãƒãƒ£ãƒ¼ãƒãƒ³"], a:1},
  {q:"å­¦æ ¡ã§ä½¿ã†é»’ã„æ¿ã®åå‰ã¯ï¼Ÿ", c:["ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰","é»’æ¿","ã˜ã‚…ã†ãŸã‚“"], a:1},
  {q:"ã¦ã‚“ãã®ã‚ˆã„æ—¥ã«å‡ºã‚‹ã‚‚ã®ã¯ï¼Ÿ", c:["ã‹ãœ","ã«ã˜","ã‹ã’"], a:2},
  {q:"ãƒ”ãƒ¼ãƒãƒ³ã®ä¸­ã¯ï¼Ÿ", c:["ã‹ã‚‰ã£ã½","æ°´","ã‚ã‚"], a:0},
  {q:"ã•ãã‚‰ã®èŠ±ãŒã•ãã®ã¯ï¼Ÿ", c:["ã¯ã‚‹","ãªã¤","ãµã‚†"], a:0},
  {q:"ã©ã†ã¶ã¤ãˆã‚“ã«ã„ãªã„ç”Ÿãç‰©ã¯ï¼Ÿ", c:["ã‚«ãƒ","ã‚´ãƒªãƒ©","ã‚¯ã‚¸ãƒ©"], a:2},
  {q:"ã‚±ãƒ¼ã‚­ã®ä¸Šã«ã®ã£ã¦ã„ã‚‹ãã ã‚‚ã®ã¯ï¼Ÿ", c:["ã‚¤ãƒã‚´","ã‚¿ãƒãƒã‚®","ãƒ”ãƒ¼ãƒãƒ³"], a:0},
  {q:"ã²ã“ã†ãã¯ã©ã“ã‚’ã¨ã¶ï¼Ÿ", c:["æµ·ã®ä¸­","ç©º","åœ°ä¸‹"], a:1},
  {q:"ãµã­ã¯ã©ã“ã‚’é€²ã‚€ï¼Ÿ", c:["ç©º","æµ·","å±±"], a:1},
  {q:"ãŠãµã‚ã«å…¥ã‚‹ã¨ãã«ä½¿ã†ã‚‚ã®ã¯ï¼Ÿ", c:["ã‚¿ã‚ªãƒ«","ã‹ã°ã‚“","ãˆã‚“ã´ã¤"], a:0},
  {q:"ã‚µãƒ«ã®ã™ããªé£Ÿã¹ç‰©ã¯ï¼Ÿ", c:["ãƒãƒŠãƒŠ","ã«ã","ãƒ‘ãƒ³"], a:0},
  {q:"ç‰›ä¹³ã¯ã©ã“ã‹ã‚‰å‡ºã‚‹ï¼Ÿ", c:["ã¶ãŸ","ã†ã—","ã†ã¾"], a:1},
  {q:"1é€±é–“ã¯ä½•æ—¥ï¼Ÿ", c:["5æ—¥","6æ—¥","7æ—¥"], a:2},
  {q:"æµ·ã®æ°´ã¯ã©ã†ã„ã†å‘³ï¼Ÿ", c:["ã‚ã¾ã„","ã—ã‚‡ã£ã±ã„","ã‹ã‚‰ã„"], a:1},
  {q:"èŠ±ç«ã‚’ã™ã‚‹ã®ã¯ã„ã¤ãŒå¤šã„ï¼Ÿ", c:["ãªã¤","ãµã‚†","ã¯ã‚‹"], a:0},
  {q:"ã†ã¾ã‚ŒãŸã°ã‹ã‚Šã®é³¥ã¯ã©ã†ã™ã‚‹ï¼Ÿ", c:["ãŸã¾ã”ã‹ã‚‰å‡ºã‚‹","ç©ºã‚’ã¨ã¶","èµ°ã‚‹"], a:0},
  {q:"ã“ã©ã‚‚ã®æ—¥ã«ã¯ä½•ã‚’ã‚ã’ã‚‹ï¼Ÿ", c:["ã ã‚“ã”","ã“ã„ã®ã¼ã‚Š","ãŠã‚‚ã¡"], a:1}
];

// --- çŠ¶æ…‹ ---
let order = [...QUESTIONS.keys()];
let idx = 0;              // ç¾åœ¨ã®å•é¡Œã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆorderåŸºæº–ï¼‰
let score = 0;            // æ­£è§£æ•°
let answered = new Map(); // orderIndex -> {choice:0/1/2, correct:boolean}

const $ = (s)=>document.querySelector(s);
const qtext = $('#qtext');
const choicesWrap = $('#choices');
const scEl = $('#sc');
const idxEl = $('#idx');
const countEl = $('#count');
const barEl = $('#bar');
const fbEl = $('#fb');
const restartBtn = $('#restart');
const shuffleCb = $('#shuffle');
const prevBtn = $('#prev');
const nextBtn = $('#next');
const showBtn = $('#showAnswer');
const grid = $('#grid');
$('#total').textContent = `ï¼ˆå…¨${QUESTIONS.length}å•ï¼‰`;
countEl.textContent = QUESTIONS.length;

function shuffle(array){
  for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]]}
}

function renderGrid(){
  grid.innerHTML = '';
  order.forEach((_,i)=>{
    const p = document.createElement('button');
    p.className = 'pill';
    p.textContent = i+1;
    p.addEventListener('click',()=>{idx=i;renderQuestion()});
    const st = answered.get(i);
    if(st){p.style.borderColor = st.correct? 'var(--ok)':'var(--ng)';}
    grid.appendChild(p);
  })
}

function renderQuestion(){
  const q = QUESTIONS[order[idx]];
  idxEl.textContent = idx+1;
  barEl.style.width = ((idx)/ (QUESTIONS.length-1))*100 + '%';
  qtext.textContent = q.q;
  fbEl.textContent = '';
  fbEl.className = 'feedback';
  choicesWrap.innerHTML = '';
  const labels = ['A','B','C'];
  q.c.forEach((text,i)=>{
    const btn = document.createElement('button');
    btn.className = 'choice';
    btn.innerHTML = `<span class="label">${labels[i]}</span> ${text}`;
    btn.addEventListener('click',()=>select(i));
    choicesWrap.appendChild(btn);
  });
  const st = answered.get(idx);
  if(st){
    markChoices(st.choice, q.a);
    showFeedback(st.correct);
  }
  prevBtn.disabled = idx===0;
  nextBtn.textContent = idx===QUESTIONS.length-1? 'çµæœã‚’è¦‹ã‚‹ â†’':'ã¤ã â†’';
  renderGrid();
}

function markChoices(chosen, answer){
  [...choicesWrap.children].forEach((el,i)=>{
    el.classList.remove('correct','wrong');
    if(i===answer) el.classList.add('correct');
    if(i===chosen && chosen!==answer) el.classList.add('wrong');
  });
}

function showFeedback(ok){
  fbEl.textContent = ok? 'âœ… æ­£è§£ï¼':'âŒ ã–ã‚“ã­ã‚“â€¦';
  fbEl.className = 'feedback ' + (ok? 'ok':'ng');
}

function select(i){
  const q = QUESTIONS[order[idx]];
  const ok = (i===q.a);
  if(!answered.has(idx)){
    if(ok) score++;
    scEl.textContent = score;
  }
  answered.set(idx,{choice:i,correct:ok});
  markChoices(i, q.a);
  showFeedback(ok);
}

function next(){
  if(idx < QUESTIONS.length-1){
    idx++;
    renderQuestion();
  } else {
    showResult();
  }
}

function prev(){
  if(idx>0){ idx--; renderQuestion(); }
}

function showAnswer(){
  const q = QUESTIONS[order[idx]];
  markChoices(q.a, q.a);
  fbEl.textContent = `æ­£è§£ã¯ ${['A','B','C'][q.a]} ã§ã™`;
  fbEl.className = 'feedback ok';
}

function showResult(){
  const total = QUESTIONS.length;
  const percent = Math.round((score/total)*100);
  qtext.textContent = `ãŠã¤ã‹ã‚Œã•ã¾ï¼ çµæœã¯ ${score}/${total}ï¼ˆ${percent}%ï¼‰ã§ã—ãŸã€‚`;
  choicesWrap.innerHTML = '';
  fbEl.textContent = 'ã‚‚ã†ä¸€åº¦ã‚„ã‚‹ã«ã¯ã€Œæœ€åˆã‹ã‚‰ã€ã‚’æŠ¼ã—ã¦ã­ã€‚';
  fbEl.className = 'feedback';
}

function reset(all=true){
  score = 0; scEl.textContent = 0; idx = 0; answered.clear();
  if(all){
    order = [...QUESTIONS.keys()];
    if(shuffleCb.checked) shuffle(order);
  }
  renderQuestion();
}

// ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
window.addEventListener('keydown',(e)=>{
  const key = e.key.toLowerCase();
  if(key==='arrowright'){ next(); }
  if(key==='arrowleft'){ prev(); }
  if(['a','1'].includes(key)) select(0);
  if(['b','2'].includes(key)) select(1);
  if(['c','3'].includes(key)) select(2);
});

nextBtn.addEventListener('click', next);
prevBtn.addEventListener('click', prev);
showBtn.addEventListener('click', showAnswer);
restartBtn.addEventListener('click', ()=>reset(true));
shuffleCb.addEventListener('change', ()=>reset(true));

// åˆæœŸè¡¨ç¤º
reset(true);
</script>
</body>
</html>
